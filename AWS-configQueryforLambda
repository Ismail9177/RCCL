SELECT
  resourceId,
  resourceName,
  resourceType,
  awsRegion,
  availabilityZone,
  configuration.functionName,
  configuration.functionArn,
  configuration.runtime,
  configuration.role,
  configuration.handler,
  configuration.codeSize,
  configuration.description,
  configuration.timeout,
  configuration.memorySize,
  configuration.lastModified,
  configuration.codeSha256,
  configuration.version,
  configuration.vpcConfig,
  configuration.environment,
  configuration.deadLetterConfig,
  configuration.kMSKeyArn,
  configuration.tracingConfig,
  configuration.masterArn,
  configuration.revisionId,
  configuration.layers,
  configuration.state,
  configuration.stateReason,
  configuration.stateReasonCode,
  configuration.lastUpdateStatus,
  configuration.lastUpdateStatusReason,
  configuration.lastUpdateStatusReasonCode,
  configuration.fileSystemConfigs,
  configuration.packageType,
  configuration.imageConfigResponse,
  configuration.signingProfileVersionArn,
  configuration.signingJobArn,
  configuration.architectures,
  configuration.ephemeralStorage,
  configuration.snapStart,
  configuration.runtimeVersionConfig,
  configuration.loggingConfig,
  configuration.tags,
  configurationItemCaptureTime,
  configurationItemStatus
WHERE
  resourceType = 'AWS::Lambda::Function'
  AND configurationItemStatus IN ('OK', 'ResourceDiscovered')
ORDER BY
  configurationItemCaptureTime DESC
